---
interface Props {
  title: string;
  description?: string;
  image?: string;
  href: string;
  date?: Date;
  tags?: string[];
}

const { title, description, image, href, date, tags = [] } = Astro.props;

const formatDate = (d: Date) => {
  return new Intl.DateTimeFormat("de-DE", {
    year: "numeric",
    month: "short",
    day: "numeric",
  }).format(d);
};
---

<a
  href={href}
  class="blog-card group block bg-card rounded-xl overflow-hidden border border-border transition-all duration-200 hover:shadow-lg hover:-translate-y-0.5"
>
  {image && (
    <div class="aspect-video overflow-hidden bg-muted">
      <img
        src={image}
        alt=""
        class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"
      />
    </div>
  )}
  <div class="p-4 space-y-2">
    {date && (
      <time
        datetime={date.toISOString()}
        class="text-xs text-muted-foreground"
      >
        {formatDate(date)}
      </time>
    )}
    <h3 class="font-semibold text-foreground line-clamp-2 group-hover:text-primary transition-colors">
      {title}
    </h3>
    {description && (
      <p class="text-sm text-muted-foreground line-clamp-3">
        {description}
      </p>
    )}
    {tags.length > 0 && (
      <div class="flex flex-wrap gap-1 pt-1">
        {tags.slice(0, 3).map((tag) => (
          <span class="cv-badge text-[10px]">{tag}</span>
        ))}
      </div>
    )}
  </div>
</a>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
